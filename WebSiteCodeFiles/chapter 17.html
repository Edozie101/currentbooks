<HTML><HEAD><TITLE>chapter 17 (3D vectors) functions</TITLE></HEAD><BODY><H2 ALIGN="center">Functions for cast member "chapter 17 (3D vectors)" of castlib "math"</H2><P><PRE><KBD><A NAME="linePlaneIntersection"> </A>on linePlaneIntersection (linePt, lineVect, planePt, planeNormal)<BR> --! ARGUMENTS: linePt, lineVect, planePt, planeNormal (all 3d vectors)<BR> --! RETURNS: proportion of lineVect from linePt to plane<BR> set d to dotProduct(lineVect,planeNormal)<BR> if d=0 then return #none<BR> set v to linePt-planePt<BR> return dotProduct(v,planeNormal)/d<BR>end <BR><HR><A NAME="planePlaneIntersection"> </A>on planePlaneIntersection (pt1, normal1, pt2, normal2)<BR> --! ARGUMENTS: pt1, normal1, pt2, normal2 (all 3D vectors)<BR> --! RETURNS: list of point and vector for the line of <A HREF="2d vector algebra.html#intersection">intersection</A> of the two planes<BR> set v to crossProduct(normal1,normal2)<BR> set u to crossProduct(normal1, v)<BR> set p to <A HREF="chapter 17.html#linePlaneIntersection">linePlaneIntersection</A>(pt1, u, pt2, normal2)<BR> if p=#none then return p<BR> return &#091;#pos:p,#vector:v&#093;<BR>end <BR><HR><A NAME="pos3DToScreenPos"> </A>on pos3DToScreenPos (pt, observerPos, observerVect, observerUp, fov, h)<BR> --! ARGUMENTS: pt, observerPos, observerVect, observerUp (3D vectors)<BR> --! fov (half field of view angle), h (half height of screen)<BR> --! RETURNS: screen position of pt on the observer's viewport<BR> set observerRight to crossProduct(observerUp, observerVect)<BR> set v to pt-observerPos<BR> set z to dotProduct(v,observerVect)<BR> if z=0 then return point(0,0)<BR> set d to h/tan(fov) <BR> set x to d*dotProduct(v,observerRight)/z<BR> set y to d*dotProduct(v,observerUp)/z<BR> return point(x,-y)<BR>end <BR><HR><A NAME="screenPosTo3DPos"> </A>on screenPosTo3DPos(viewportPos, observerVect, observerUp, fov, h)<BR> --! ARGUMENTS: viewportPos, observerPos, observerVect, observerUp (3D vectors)<BR> --! fov (half field of view angle), h (half height of screen)<BR> --! RETURNS: vector from the observer to the screen point clicked<BR> set observerRight to crossProduct(observerUp, observerVect)<BR> set d to h/tan(fov) <BR> return observerVect*d - observerUp*viewportPos&#091;2&#093; + observerRight*viewportPos&#091;1&#093;<BR>end <BR><HR></KBD><P><A HREF="math index.html">Back to index</A></PRE></BODY></HTML> 