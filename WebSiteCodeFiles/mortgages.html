<HTML><HEAD><TITLE>mortgages functions</TITLE></HEAD><BODY><H2 ALIGN="center">Functions for cast member "mortgages" of castlib "math"</H2><P><PRE><KBD><A NAME="compoundinterest"> </A>on compoundinterest am, pc, yr<BR> --! ARGUMENTS: am (initial investment), pc (annual interest percentage), yr (number of years)<BR> --! RETURNS: a string giving the year-on-year return on the investment<BR> set the floatprecision to 2 -- (ensures two decimal place output)<BR> set output to ""<BR> repeat with i=1 to yr<BR> oldam=am<BR> -- each year multiply am by (100+pc)/100<BR> am=(100.0+pc)*am/100<BR> put "At the end of year"&&i&&"you have"&&100+pc&"% of $"&oldam&&"= $"&am&return after output<BR> end repeat<BR> return output<BR>end<BR><HR><A NAME="mortgage"> </A>on mortgage am, pc, pay, tp<BR> --! ARGUMENTS: am (loan amount), pc (APR), pay (monthly payment),<BR> --! tp (#monthly, #mixed or #yearly (default), the detail required for output)<BR> --! RETURNS: a string giving the rate of repayment on a (capital and repayment) mortgage<BR> set the floatprecision to 2 -- (ensures two decimal place output)<BR> -- set the monthly interest, as a fraction 1+APR/1200<BR> pc=1+pc/(1200.0)<BR> i=0<BR> oldam=am<BR> ret=""<BR> repeat while am&#062;0<BR> i=i+1<BR> -- each month, increase the loan by the monthly interest, and decrease it by the fixed payment<BR> am=pc*am - pay<BR> if am&#060;=0 then <BR> -- if the amount is less than or equal to zero then the loan has been repayed<BR> put "At the end of month"&&i&&"the loan is $0"&return after ret<BR> -- we can also calculate the total money paid in interest<BR> put "You have paid $"&(i*pay-oldam+am)&&"in interest." after ret<BR> am=0<BR> else<BR> if (i mod 12) = 0 then tx="year"&&i/12<BR> else tx="month"&&i<BR> if tp=#monthly or (tp=#mixed and i&#060;12) or ((i mod 12) =0) then<BR> put "At the end of"&&tx&&"the loan is $"&am&return after ret<BR> <BR> end if<BR> <BR> end if<BR> end repeat<BR> return ret<BR>end<BR><HR><A NAME="mortgagecalc"> </A>on mortgagecalc am, pc, yr<BR> --! ARGUMENTS: am (loan amount), pc (APR), yr (number of years),<BR> --! RETURNS: a string giving the monthly payment for a (capital and repayment) <A HREF="mortgages.html#mortgage">mortgage</A> at the given APR<BR> i = 1+pc/1200.0<BR> mth=yr*12<BR> pow=power(i,mth)<BR> pay=am*pow*(i-1)/(pow-1)<BR> put "Monthly payment is"&&pay<BR> <A HREF="mortgages.html#mortgage">mortgage</A>(am,pc,pay,#year)<BR>end<BR><HR></KBD><P><A HREF="math index.html">Back to index</A></PRE></BODY></HTML> 