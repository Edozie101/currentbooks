<HTML><HEAD><TITLE>detection (pool) functions</TITLE></HEAD><BODY><H2 ALIGN="center">Functions for cast member "detection (pool)" of castlib "pool"</H2><P><PRE><KBD><A NAME="ballBallCollision"> </A>on ballBallCollision (c1Pos, c1Vel, radius, c2Pos, c2Vel, radius2)<BR> --! ARGUMENTS: c1Pos, c1Vel (2D vectors), radius (number), <BR> --! c2Pos, c2Vel (2D vectors), radius2 (number)<BR> --! RETURNS: a &#091;#t,#normal&#093; list for the collision of two circles<BR> set relVelocity to c1Vel-c2Vel<BR> return <A HREF="detection.html#pointBallCollision">pointBallCollision</A>(c1Pos-c2Pos, relVelocity, radius+radius2)<BR>end<BR><HR><A NAME="pointBallCollision"> </A>on pointBallCollision(pt, v, radius)<BR> --! ARGUMENTS: pt, v (2D vectors), radius (number)<BR> --! RETURNS: a &#091;#t,#normal&#093; list for the collision of a particle at p<BR> --! moving with displacement v with a circle at O with given radius <BR> set ww to dotProd(pt,pt) <BR> if ww&#060;radius*radius then return #inside<BR> set a to dotProd(v,v)<BR> if a=0 then return #none<BR> set b to dotProd(pt,v)<BR> if b&#062;0 then return #none<BR> set c to ww-radius*radius<BR> set root to b*b-a*c<BR> if root&#060;0 then return #none<BR> set t to (-b-sqrt(root))/a<BR> if t&#062;1 or t&#060;0 then return #none<BR> return &#091;#t:t,#normal:norm(pt+t*v)&#093;<BR>end <BR><HR><A NAME="ballCushionCollision"> </A>on ballCushionCollision (radius, startPos, displacement, wallPoint, wallVector, wallNormal)<BR> --! ARGUMENTS: radius (number), startPos, displacement (2D vectors), <BR> --! wallPoint, wallVector, wallNormal (2D vectors)<BR> --! RETURNS: a &#091;#t,#normal&#093; list for a ball with a fixed cushion <BR> --! between wallPoint and wallPoint+wallVector. <BR> <BR> -- note that the normal is always pointing towards the ball<BR> if dotProd(displacement,wallNormal)&#062;0 then return #none<BR> set p to startPos-radius*wallNormal<BR> t= intersectionV(p, displacement, wallPoint, wallVector)<BR> if t=#none then return t<BR> return &#091;#t:t,#normal:wallNormal&#093;<BR> return <BR>end <BR><HR></KBD><P><A HREF="pool index.html">Back to index</A></PRE></BODY></HTML> 