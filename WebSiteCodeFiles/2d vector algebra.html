<HTML><HEAD><TITLE>2d vector algebra functions</TITLE></HEAD><BODY><H2 ALIGN="center">Functions for cast member "2d vector algebra" of castlib "math"</H2><P><PRE><KBD><A NAME="intersectionPoint"> </A>on intersectionPoint(a, b, c, d)<BR> --! ARGUMENTS: a, b, c, d (2D position vectors)<BR> --! RETURNS: <A HREF="2d vector algebra.html#intersection">intersection</A> point of the lines ab and cd<BR> <BR> -- find components of line vectors<BR> set tc1 to b&#091;1&#093;-a&#091;1&#093;<BR> set tc2 to b&#091;2&#093;-a&#091;2&#093;<BR> set sc1 to c&#091;1&#093;-d&#091;1&#093;<BR> set sc2 to c&#091;2&#093;-d&#091;2&#093;<BR> -- find vector ac<BR> set con1 to c&#091;1&#093;-a&#091;1&#093;<BR> set con2 to c&#091;2&#093;-a&#091;2&#093;<BR> -- find <A HREF="matrices.html#determinant">determinant</A><BR> set det to (tc1*sc2-tc2*sc1)<BR> -- if <A HREF="matrices.html#determinant">determinant</A> is zero then there is no unique solution<BR> if det=0 then return #parallel<BR> -- calculate numerator<BR> set con to tc2*con1-tc1*con2<BR> -- calculate <A HREF="2d vector algebra.html#intersection">intersection</A> point<BR> set s to con/float(det)<BR> return c+s*(d-c)<BR>end <BR><HR><A NAME="intersectionTime"> </A>on intersectionTime (p1, v1, p2, v2)<BR> --! ARGUMENTS: p1, v1 (first 2D position and direction vectors); <BR> --! p2, v2 (second position and direction vectors)<BR> --! RETURNS: <A HREF="2d vector algebra.html#intersection">intersection</A> parameter t such that <A HREF="2d vector algebra.html#intersection">intersection</A> point is at p1+t * v1<BR> --! whether or not this lies on the line segment p2, v2<BR> <BR> -- separate out components of direction vectors<BR> set tc1 to v1&#091;1&#093;<BR> set tc2 to v1&#091;2&#093;<BR> set sc1 to v2&#091;1&#093;<BR> set sc2 to v2&#091;2&#093;<BR> -- find vector from p1 to p2<BR> set con1 to p2&#091;1&#093;-p1&#091;1&#093;<BR> set con2 to p2&#091;2&#093;-p1&#091;2&#093;<BR> -- find <A HREF="matrices.html#determinant">determinant</A><BR> set det to (tc2*sc1-tc1*sc2)<BR> -- if <A HREF="matrices.html#determinant">determinant</A> is zero then there is no unique solution<BR> if det=0 then return #parallel<BR> -- calculate numerator<BR> set con to sc1*con2-sc2*con1<BR> -- calculate <A HREF="2d vector algebra.html#intersection">intersection</A> point<BR> set t to con/float(det)<BR> if t&#060;=0 or t&#062;1 then return #none<BR> return t<BR>end<BR><HR><A NAME="intersection"> </A>on intersection (a, b, c, d)<BR> --! ARGUMENTS: a, b, c, d (2D position vectors)<BR> --! RETURNS: intersection parameter t such that intersection point is at a+t * (b-a), or #none<BR> --! and lies on the line segment cd<BR> <BR> -- find line vectors<BR> set v1 to b-a<BR> set v2 to d-c<BR> return <A HREF="2d vector algebra.html#intersectionV">intersectionV</A>(a,v1,c,v2)<BR>end<BR><HR><A NAME="intersectionV"> </A>on intersectionV (p1, v1, p2, v2)<BR> --! ARGUMENTS: p1, p2 (2D position vectors), v1, v2 (2d direction vectors)<BR> --! RETURNS: <A HREF="2d vector algebra.html#intersection">intersection</A> parameter t such that <A HREF="2d vector algebra.html#intersection">intersection</A> point is at p1+t * (v1), or #none<BR> --! and lies on the line segment p2, v2<BR> <BR> -- find vector ac<BR> set con1 to p2&#091;1&#093;-p1&#091;1&#093;<BR> set con2 to p2&#091;2&#093;-p1&#091;2&#093;<BR> -- find <A HREF="matrices.html#determinant">determinant</A><BR> set det to (v2&#091;1&#093;*v1&#091;2&#093;-v2&#091;2&#093;*v1&#091;1&#093;)<BR> -- if <A HREF="matrices.html#determinant">determinant</A> is zero then lines are parallel<BR> if det=0 then return #none -- not making a distinction here between no unique solution and no solution at all<BR> -- calculate numerator<BR> set con to v1&#091;1&#093;*con2-v1&#091;2&#093;*con1<BR> -- calculate first <A HREF="2d vector algebra.html#intersection">intersection</A> parameter<BR> set s to con/float(det)<BR> -- check if <A HREF="2d vector algebra.html#intersection">intersection</A> is within line segment<BR> if s&#060;=0 or s&#062;1 then return #none<BR> -- calculate second <A HREF="2d vector algebra.html#intersection">intersection</A> parameter<BR> if v1&#091;1&#093;&#060;&#062;0 then set t to (con1+s*v2&#091;1&#093;)/v1&#091;1&#093;<BR> else set t to (con2+s*v2&#091;2&#093;)/v1&#091;2&#093;<BR> -- check if <A HREF="2d vector algebra.html#intersection">intersection</A> is within line segment<BR> if t&#060;=0 or t&#062;1 then return #none<BR> -- both parameters are in &#091;0,1&#093; so the lines intersect<BR> return t<BR>end <BR><HR></KBD><P><A HREF="math index.html">Back to index</A></PRE></BODY></HTML> 